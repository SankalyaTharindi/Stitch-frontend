import{a as q}from"./chunk-TKBUKJXS.js";import{a as z,b as g,c as A,d as j,g as D,i as R,j as U,p as G,r as B}from"./chunk-RMUC5KL2.js";import{D as a,E as w,J as c,L as m,N as x,P as o,Q as i,R as b,S as C,T as h,U as p,W as l,X as P,Y as E,ma as T,o as F,oa as I,r as k,s as O,v as f,va as L,w as v,xa as N,ya as V}from"./chunk-7MOYBRMF.js";function J(e,d){e&1&&(o(0,"span"),l(1,"Email is required"),i())}function $(e,d){e&1&&(o(0,"span"),l(1,"Please enter a valid email address"),i())}function H(e,d){if(e&1&&(o(0,"div",30),c(1,J,2,0,"span",31)(2,$,2,0,"span",31),i()),e&2){let t,n,r=p(4);a(),m("ngIf",(t=r.loginForm.get("email"))==null||t.errors==null?null:t.errors.required),a(),m("ngIf",(n=r.loginForm.get("email"))==null||n.errors==null?null:n.errors.email)}}function K(e,d){e&1&&(o(0,"span"),l(1,"Password is required"),i())}function Q(e,d){if(e&1&&(o(0,"div",30),c(1,K,2,0,"span",31),i()),e&2){let t,n=p(4);a(),m("ngIf",(t=n.loginForm.get("password"))==null||t.errors==null?null:t.errors.required)}}function X(e,d){if(e&1&&(o(0,"div",30),l(1),i()),e&2){let t=p(4);a(),P(t.error)}}function Z(e,d){if(e&1){let t=C();o(0,"form",22),h("ngSubmit",function(){f(t);let r=p(3);return v(r.onSubmit())})("click",function(r){return f(t),v(r.stopPropagation())}),o(1,"div",23)(2,"label",24),l(3,"Email Address"),i(),b(4,"input",25),c(5,H,3,2,"div",26),i(),o(6,"div",23)(7,"label",27),l(8,"Password"),i(),b(9,"input",28),c(10,Q,2,1,"div",26),i(),c(11,X,2,1,"div",26),o(12,"button",29),l(13),i()()}if(e&2){let t,n,r,u,_=p(3);m("formGroup",_.loginForm),a(4),x("invalid",((t=_.loginForm.get("email"))==null?null:t.invalid)&&((t=_.loginForm.get("email"))==null?null:t.touched)),a(),m("ngIf",((n=_.loginForm.get("email"))==null?null:n.invalid)&&((n=_.loginForm.get("email"))==null?null:n.touched)),a(4),x("invalid",((r=_.loginForm.get("password"))==null?null:r.invalid)&&((r=_.loginForm.get("password"))==null?null:r.touched)),a(),m("ngIf",((u=_.loginForm.get("password"))==null?null:u.invalid)&&((u=_.loginForm.get("password"))==null?null:u.touched)),a(),m("ngIf",_.error),a(),m("disabled",_.loading||_.loginForm.invalid),a(),E(" ",_.loading?"Signing In...":"Sign In"," ")}}function ee(e,d){if(e&1){let t=C();o(0,"div",18)(1,"button",19),h("click",function(){f(t);let r=p(2);return v(r.closeModal())}),l(2,"\xD7"),i(),o(3,"div",20)(4,"h2"),l(5,"Sign In"),i(),o(6,"p"),l(7,"Welcome back to luxury"),i()(),c(8,Z,14,10,"form",21),i()}if(e&2){let t=p(2);a(8),m("ngIf",t.activeTab==="signin")}}function te(e,d){e&1&&(o(0,"span"),l(1,"Full name is required"),i())}function ne(e,d){e&1&&(o(0,"span"),l(1,"Name must be at least 2 characters"),i())}function ie(e,d){if(e&1&&(o(0,"div",30),c(1,te,2,0,"span",31)(2,ne,2,0,"span",31),i()),e&2){let t,n,r=p(4);a(),m("ngIf",(t=r.registerForm.get("fullName"))==null||t.errors==null?null:t.errors.required),a(),m("ngIf",(n=r.registerForm.get("fullName"))==null||n.errors==null?null:n.errors.minlength)}}function re(e,d){e&1&&(o(0,"span"),l(1,"Email is required"),i())}function oe(e,d){e&1&&(o(0,"span"),l(1,"Please enter a valid email address"),i())}function le(e,d){if(e&1&&(o(0,"div",30),c(1,re,2,0,"span",31)(2,oe,2,0,"span",31),i()),e&2){let t,n,r=p(4);a(),m("ngIf",(t=r.registerForm.get("email"))==null||t.errors==null?null:t.errors.required),a(),m("ngIf",(n=r.registerForm.get("email"))==null||n.errors==null?null:n.errors.email)}}function ae(e,d){e&1&&(o(0,"span"),l(1,"Phone number is required"),i())}function me(e,d){e&1&&(o(0,"span"),l(1,"Please enter a valid phone number"),i())}function de(e,d){if(e&1&&(o(0,"div",30),c(1,ae,2,0,"span",31)(2,me,2,0,"span",31),i()),e&2){let t,n,r=p(4);a(),m("ngIf",(t=r.registerForm.get("phoneNumber"))==null||t.errors==null?null:t.errors.required),a(),m("ngIf",(n=r.registerForm.get("phoneNumber"))==null||n.errors==null?null:n.errors.pattern)}}function se(e,d){e&1&&(o(0,"span"),l(1,"Password is required"),i())}function ce(e,d){e&1&&(o(0,"span"),l(1,"Password must be at least 6 characters"),i())}function pe(e,d){if(e&1&&(o(0,"div",30),c(1,se,2,0,"span",31)(2,ce,2,0,"span",31),i()),e&2){let t,n,r=p(4);a(),m("ngIf",(t=r.registerForm.get("password"))==null||t.errors==null?null:t.errors.required),a(),m("ngIf",(n=r.registerForm.get("password"))==null||n.errors==null?null:n.errors.minlength)}}function _e(e,d){if(e&1&&(o(0,"div",30),l(1),i()),e&2){let t=p(4);a(),P(t.error)}}function ue(e,d){if(e&1){let t=C();o(0,"form",22),h("ngSubmit",function(){f(t);let r=p(3);return v(r.onRegister())})("click",function(r){return f(t),v(r.stopPropagation())}),o(1,"div",23)(2,"label",32),l(3,"Full Name"),i(),b(4,"input",33),c(5,ie,3,2,"div",26),i(),o(6,"div",23)(7,"label",34),l(8,"Email Address"),i(),b(9,"input",35),c(10,le,3,2,"div",26),i(),o(11,"div",23)(12,"label",36),l(13,"Phone Number"),i(),b(14,"input",37),c(15,de,3,2,"div",26),i(),o(16,"div",23)(17,"label",38),l(18,"Password"),i(),b(19,"input",39),c(20,pe,3,2,"div",26),i(),c(21,_e,2,1,"div",26),o(22,"button",29),l(23),i()()}if(e&2){let t,n,r,u,_,y,S,M,s=p(3);m("formGroup",s.registerForm),a(4),x("invalid",((t=s.registerForm.get("fullName"))==null?null:t.invalid)&&((t=s.registerForm.get("fullName"))==null?null:t.touched)),a(),m("ngIf",((n=s.registerForm.get("fullName"))==null?null:n.invalid)&&((n=s.registerForm.get("fullName"))==null?null:n.touched)),a(4),x("invalid",((r=s.registerForm.get("email"))==null?null:r.invalid)&&((r=s.registerForm.get("email"))==null?null:r.touched)),a(),m("ngIf",((u=s.registerForm.get("email"))==null?null:u.invalid)&&((u=s.registerForm.get("email"))==null?null:u.touched)),a(4),x("invalid",((_=s.registerForm.get("phoneNumber"))==null?null:_.invalid)&&((_=s.registerForm.get("phoneNumber"))==null?null:_.touched)),a(),m("ngIf",((y=s.registerForm.get("phoneNumber"))==null?null:y.invalid)&&((y=s.registerForm.get("phoneNumber"))==null?null:y.touched)),a(4),x("invalid",((S=s.registerForm.get("password"))==null?null:S.invalid)&&((S=s.registerForm.get("password"))==null?null:S.touched)),a(),m("ngIf",((M=s.registerForm.get("password"))==null?null:M.invalid)&&((M=s.registerForm.get("password"))==null?null:M.touched)),a(),m("ngIf",s.error),a(),m("disabled",s.loading||s.registerForm.invalid),a(),E(" ",s.loading?"Creating Account...":"Create Account"," ")}}function ge(e,d){if(e&1){let t=C();o(0,"div",18)(1,"button",19),h("click",function(){f(t);let r=p(2);return v(r.closeModal())}),l(2,"\xD7"),i(),o(3,"div",20)(4,"h2"),l(5,"Sign Up"),i(),o(6,"p"),l(7,"Join our exclusive experience"),i()(),c(8,ue,24,16,"form",21),i()}if(e&2){let t=p(2);a(8),m("ngIf",t.activeTab==="signup")}}function fe(e,d){if(e&1){let t=C();o(0,"div",15),h("click",function(){f(t);let r=p();return v(r.closeModal())}),o(1,"div",16),h("click",function(r){return f(t),v(r.stopPropagation())}),c(2,ee,9,1,"div",17)(3,ge,9,1,"div",17),i()()}if(e&2){let t=p();a(2),m("ngIf",t.activeTab==="signin"),a(),m("ngIf",t.activeTab==="signup")}}var W=(()=>{class e{constructor(t,n,r,u){this.formBuilder=t,this.authService=n,this.router=r,this.route=u,this.loading=!1,this.error="",this.returnUrl="",this.activeTab="signin",this.showModal=!1,this.loginForm=this.formBuilder.group({email:["",[g.required,g.email]],password:["",g.required]}),this.registerForm=this.formBuilder.group({fullName:["",[g.required,g.minLength(2)]],email:["",[g.required,g.email]],phoneNumber:["",[g.required,g.pattern(/^[0-9]{10,15}$/)]],password:["",[g.required,g.minLength(6)]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}setActiveTab(t){this.activeTab=t,this.error=""}openModal(t){this.activeTab=t,this.showModal=!0,this.error="",document.body.style.overflow="hidden"}closeModal(){this.showModal=!1,this.error="",this.loginForm.reset(),this.registerForm.reset(),document.body.style.overflow=""}onSubmit(){if(this.loginForm.invalid){Object.keys(this.loginForm.controls).forEach(r=>{this.loginForm.get(r)?.markAsTouched()});return}this.loading=!0,this.error="";let{email:t,password:n}=this.loginForm.value;this.authService.login(t,n).subscribe({next:r=>{console.log("Login response:",r),console.log("User role:",r.user.role),this.loading=!1;let u=r.user.role==="ADMIN"?"/admin/dashboard":"/customer/dashboard";console.log("Navigating to:",u),this.router.navigate([u])},error:r=>{console.error("Login error:",r),this.error="Invalid email or password",this.loading=!1}})}onRegister(){if(this.registerForm.invalid){Object.keys(this.registerForm.controls).forEach(n=>{this.registerForm.get(n)?.markAsTouched()});return}this.loading=!0,this.error="";let t=this.registerForm.value;this.authService.register(t).subscribe({next:n=>{console.log("Registration successful:",n),this.loading=!1;let r=n.user.role==="ADMIN"?"/admin/dashboard":"/customer/dashboard";this.router.navigate([r])},error:n=>{console.error("Registration error:",n),this.error=n.error?.message||"Registration failed. Please try again.",this.loading=!1}})}static{this.\u0275fac=function(n){return new(n||e)(w(G),w(q),w(N),w(L))}}static{this.\u0275cmp=k({type:e,selectors:[["app-login"]],decls:41,vars:1,consts:[[1,"auth-container"],[1,"auth-header"],[1,"brand-title"],[1,"auth-buttons"],[1,"btn-auth",3,"click"],[1,"btn-auth","btn-primary-outline",3,"click"],[1,"main-content"],[1,"hero-section"],[1,"tagline"],[1,"description"],[1,"features"],[1,"feature-card"],[1,"feature-icon"],[1,"material-icons"],["class","modal-overlay",3,"click",4,"ngIf"],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],["class","auth-box",4,"ngIf"],[1,"auth-box"],[1,"close-btn",3,"click"],[1,"box-header"],[3,"formGroup","ngSubmit","click",4,"ngIf"],[3,"ngSubmit","click","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","your@email.com"],["class","error",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password"],["type","submit",1,"btn-primary",3,"disabled"],[1,"error"],[4,"ngIf"],["for","fullName"],["type","text","id","fullName","formControlName","fullName","placeholder","Your full name"],["for","signupEmail"],["type","email","id","signupEmail","formControlName","email","placeholder","your@email.com"],["for","phoneNumber"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder","Your phone number"],["for","signupPassword"],["type","password","id","signupPassword","formControlName","password","placeholder","Create a password"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"header",1)(2,"h1",2),l(3,"Stitch"),i(),o(4,"div",3)(5,"button",4),h("click",function(){return r.openModal("signin")}),l(6,"Sign In"),i(),o(7,"button",5),h("click",function(){return r.openModal("signup")}),l(8,"Sign Up"),i()()(),o(9,"div",6)(10,"div",7)(11,"h2",8),l(12,"Elegance in Every Thread"),i(),o(13,"p",9),l(14," Experience the art of bespoke tailoring with our exclusive appointment system. Schedule your consultation with our master craftsmen and bring your vision to life. "),i(),o(15,"div",10)(16,"div",11)(17,"div",12)(18,"span",13),l(19,"event_available"),i()(),o(20,"h3"),l(21,"Easy Booking"),i(),o(22,"p"),l(23,"Schedule appointments at your convenience with our intuitive booking system"),i()(),o(24,"div",11)(25,"div",12)(26,"span",13),l(27,"content_cut"),i()(),o(28,"h3"),l(29,"Expert Craftsmanship"),i(),o(30,"p"),l(31,"Work with experienced tailors who bring decades of expertise to every stitch"),i()(),o(32,"div",11)(33,"div",12)(34,"span",13),l(35,"checkroom"),i()(),o(36,"h3"),l(37,"Custom Designs"),i(),o(38,"p"),l(39,"From formal wear to casual elegance, we create pieces that reflect your style"),i()()()()(),c(40,fe,4,2,"div",14),i()),n&2&&(a(40),m("ngIf",r.showModal))},dependencies:[T,D,z,A,j,R,U],styles:[".auth-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#2d010cf2,#2c010ef2),url(https://images.unsplash.com/photo-1615799998603-7c6270a45196?w=1920) center/cover;position:relative}.auth-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:2rem 4rem;position:relative;z-index:1}@media (max-width: 768px){.auth-header[_ngcontent-%COMP%]{padding:1.5rem 2rem;flex-direction:column;gap:1rem}}.brand-title[_ngcontent-%COMP%]{font-family:Monsieur La Doulaise,cursive;font-size:4rem;font-weight:400;background:linear-gradient(135deg,#d4af37,#f4e5c3,#d4af37);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;margin:0;letter-spacing:.08em}@media (max-width: 768px){.brand-title[_ngcontent-%COMP%]{font-size:3rem}}.auth-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem}.btn-auth[_ngcontent-%COMP%]{padding:.75rem 2rem;border:2px solid #d4af37;background:linear-gradient(135deg,#d4af37,#f4e5c3,#d4af37);color:#2d010c;border-radius:8px;font-weight:600;cursor:pointer}.btn-auth.btn-primary-outline[_ngcontent-%COMP%]{background:transparent;color:#d4af37}.main-content[_ngcontent-%COMP%]{padding:4rem;max-width:1200px;margin:0 auto;position:relative;z-index:1}@media (max-width: 768px){.main-content[_ngcontent-%COMP%]{padding:2rem}}.hero-section[_ngcontent-%COMP%]{text-align:center}.tagline[_ngcontent-%COMP%]{font-size:2.5rem;color:#f4e5c3;margin-bottom:1.5rem}@media (max-width: 768px){.tagline[_ngcontent-%COMP%]{font-size:1.8rem}}.description[_ngcontent-%COMP%]{font-size:1.2rem;color:#f4e5c3cc;max-width:800px;margin:0 auto 4rem;line-height:1.8}.features[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:2rem;margin-top:4rem}@media (max-width: 968px){.features[_ngcontent-%COMP%]{grid-template-columns:1fr}}.feature-card[_ngcontent-%COMP%]{background:#280f0a99;padding:2rem;border-radius:15px;border:1px solid rgba(212,175,55,.2)}.feature-card[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]{margin-bottom:1rem}.feature-card[_ngcontent-%COMP%]   .feature-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:48px;color:#d4af37}.feature-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#d4af37;font-size:1.3rem;margin-bottom:1rem}.feature-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f4e5c3b3;line-height:1.6}.modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000c;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:2rem}.modal-content[_ngcontent-%COMP%]{max-width:500px;width:100%;max-height:90vh;overflow-y:auto}.auth-box[_ngcontent-%COMP%]{background:linear-gradient(145deg,#280f0afa,#37140ffa);border:2px solid rgba(212,175,55,.3);border-radius:20px;padding:2.5rem;position:relative}.auth-box[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem;background:transparent;border:none;color:#d4af37;font-size:2rem;cursor:pointer;width:40px;height:40px;display:flex;align-items:center;justify-content:center;border-radius:50%}.box-header[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center}.box-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f4e5c3;font-size:2rem;margin:0 0 .5rem;font-weight:600}.box-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f4e5c3b3;font-size:.95rem;margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#d4af37;font-size:.9rem;font-weight:500;margin-bottom:.5rem;text-transform:uppercase}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;background:#ffffff0d;border:1.5px solid rgba(212,175,55,.3);border-radius:10px;color:#f4e5c3;font-size:1rem;transition:all .3s;box-sizing:border-box}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f4e5c366}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#d4af37;background:#ffffff14}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus.invalid{border-color:#ff6b6b}.error[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.85rem;margin-top:.5rem;display:block}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:1rem;background:linear-gradient(135deg,#d4af37,#f4e5c3,#d4af37);border:none;border-radius:10px;color:#500014;font-size:1rem;font-weight:600;cursor:pointer;margin-top:1rem}.btn-primary[_ngcontent-%COMP%]:disabled{background:#d4af374d;color:#2a004080;cursor:not-allowed}"]})}}return e})();var ve=[{path:"login",component:W},{path:"",redirectTo:"login",pathMatch:"full"}],Fe=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=O({type:e})}static{this.\u0275inj=F({imports:[I,B,V.forChild(ve)]})}}return e})();export{Fe as AuthModule};
