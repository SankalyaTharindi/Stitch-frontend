import{c as G,e as W,i as H,j as J,k as q,m as K}from"./chunk-4KFBGNBN.js";import{$ as P,C as o,D as C,I as u,J as m,K as f,L as O,M as t,N as n,O as S,P as A,Q as c,R as g,S as k,T as i,U as s,V as h,W as T,X as L,Y as N,_ as b,aa as F,ia as z,ja as R,ka as $,la as V,ma as j,n as D,o as y,q as I,r as v,s as w,ua as U,v as _,w as x,wa as B}from"./chunk-QENFXKYE.js";var Q=(()=>{class a{constructor(e){this.http=e,this.API_URL="http://localhost:8080/api"}createAppointment(e,d){let r=new FormData;return r.append("appointment",new Blob([JSON.stringify(e)],{type:"application/json"})),d&&r.append("image",d),this.http.post(`${this.API_URL}/customer/appointments`,r)}getMyAppointments(){return this.http.get(`${this.API_URL}/customer/appointments`)}getAllAppointments(){return this.http.get(`${this.API_URL}/admin/appointments`)}getAppointmentById(e){return this.http.get(`${this.API_URL}/admin/appointments/${e}`)}approveAppointment(e){return this.http.put(`${this.API_URL}/admin/appointments/${e}/approve`,{})}declineAppointment(e,d){return this.http.put(`${this.API_URL}/admin/appointments/${e}/decline`,{reason:d})}updateAppointmentStatus(e,d){return this.http.put(`${this.API_URL}/admin/appointments/${e}/status`,{status:d})}static{this.\u0275fac=function(d){return new(d||a)(I(j))}}static{this.\u0275prov=D({token:a,factory:a.\u0275fac,providedIn:"root"})}}return a})();var X=(()=>{class a{constructor(e){this.router=e}isActive(e){return this.router.url===e}navigate(e){this.router.navigate([e])}static{this.\u0275fac=function(d){return new(d||a)(C(U))}}static{this.\u0275cmp=v({type:a,selectors:[["app-sidebar"]],decls:35,vars:12,consts:[[1,"sidebar"],[1,"sidebar-title"],[1,"nav-list"],[1,"nav-item",3,"click"],[1,"icon"]],template:function(d,r){d&1&&(t(0,"aside",0)(1,"h2",1),i(2,"Stitch Admin"),n(),t(3,"nav")(4,"ul",2)(5,"li",3),c("click",function(){return r.navigate("/admin/dashboard")}),t(6,"span",4),i(7,"\u{1F4CA}"),n(),t(8,"span"),i(9,"Dashboard"),n()(),t(10,"li",3),c("click",function(){return r.navigate("/admin/appointments")}),t(11,"span",4),i(12,"\u{1F4C5}"),n(),t(13,"span"),i(14,"Appointments"),n()(),t(15,"li",3),c("click",function(){return r.navigate("/admin/customers")}),t(16,"span",4),i(17,"\u{1F465}"),n(),t(18,"span"),i(19,"Customers"),n()(),t(20,"li",3),c("click",function(){return r.navigate("/admin/calendar")}),t(21,"span",4),i(22,"\u{1F4C6}"),n(),t(23,"span"),i(24,"Calendar"),n()(),t(25,"li",3),c("click",function(){return r.navigate("/admin/gallery")}),t(26,"span",4),i(27,"\u{1F5BC}\uFE0F"),n(),t(28,"span"),i(29,"Gallery"),n()(),t(30,"li",3),c("click",function(){return r.navigate("/admin/messages")}),t(31,"span",4),i(32,"\u{1F4AC}"),n(),t(33,"span"),i(34,"Messages"),n()()()()()),d&2&&(o(5),f("active",r.isActive("/admin/dashboard")),o(5),f("active",r.isActive("/admin/appointments")),o(5),f("active",r.isActive("/admin/customers")),o(5),f("active",r.isActive("/admin/calendar")),o(5),f("active",r.isActive("/admin/gallery")),o(5),f("active",r.isActive("/admin/messages")))},styles:[".sidebar[_ngcontent-%COMP%]{width:260px;background:#12010af5;border-right:1px solid rgba(255,255,255,.06);padding:24px 20px;display:flex;flex-direction:column;gap:24px}.sidebar-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;text-transform:uppercase;background:linear-gradient(120deg,#f6e7c1,#f1c878);-webkit-background-clip:text;background-clip:text;color:transparent}.nav-list[_ngcontent-%COMP%]{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px}.nav-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:8px;color:#e5d9ff;cursor:pointer;transition:background .18s}.nav-item[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:16px}.nav-item[_ngcontent-%COMP%]:hover{background:#f6e7c117}.nav-item.active[_ngcontent-%COMP%]{background:#f6e7c129;color:#f6e7c1}@media (max-width: 900px){.sidebar[_ngcontent-%COMP%]{width:100%;flex-direction:row;border-right:none;border-bottom:1px solid rgba(255,255,255,.06)}.nav-list[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}}"]})}}return a})();function ne(a,l){if(a&1&&(t(0,"span",17),i(1),n()),a&2){let e=g();o(),s(e.getPendingCount())}}function ie(a,l){if(a&1&&(t(0,"div",18)(1,"div",19)(2,"div",20),i(3,"\u23F3"),n(),t(4,"div",21)(5,"h3"),i(6),n(),t(7,"p"),i(8,"Pending Appointments"),n()()(),t(9,"div",22)(10,"div",20),i(11,"\u2713"),n(),t(12,"div",21)(13,"h3"),i(14),n(),t(15,"p"),i(16,"Approved Appointments"),n()()(),t(17,"div",23)(18,"div",20),i(19,"\u{1F389}"),n(),t(20,"div",21)(21,"h3"),i(22),n(),t(23,"p"),i(24,"Completed Orders"),n()()(),t(25,"div",24)(26,"div",20),i(27,"\u{1F4CA}"),n(),t(28,"div",21)(29,"h3"),i(30),n(),t(31,"p"),i(32,"Total Appointments"),n()()()()),a&2){let e=g();o(6),s(e.getPendingCount()),o(8),s(e.getApprovedCount()),o(8),s(e.getCompletedCount()),o(8),s(e.appointments.length)}}function ae(a,l){if(a&1&&(t(0,"div",28)(1,"div",29)(2,"span",30),i(3),b(4,"date"),n(),t(5,"span",31),i(6),b(7,"date"),n()(),t(8,"div",32)(9,"h4"),i(10),n(),t(11,"p"),i(12),n(),t(13,"span",33),i(14),n()()()),a&2){let e=l.$implicit;o(3),s(P(4,7,e.deadline,"dd")),o(3),s(P(7,10,e.deadline,"MMM")),o(4),s(e.customerName),o(2),s(e.phoneNumber),o(),O("status-"+e.status.toLowerCase()),o(),h(" ",e.status," ")}}function oe(a,l){if(a&1&&(t(0,"div",25)(1,"h2"),i(2,"Upcoming Deadlines"),n(),t(3,"div",26),u(4,ae,15,13,"div",27),n()()),a&2){let e=g();o(4),m("ngForOf",e.getUpcomingDeadlines())}}function re(a,l){if(a&1&&(t(0,"option",34),i(1),n()),a&2){let e=l.$implicit;m("value",e.value),o(),h(" ",e.label," ")}}function de(a,l){if(a&1&&(t(0,"div",49)(1,"span",45),i(2,"Notes:"),n(),t(3,"span",46),i(4),n()()),a&2){let e=g().$implicit;o(4),s(e.notes)}}function pe(a,l){if(a&1){let e=A();t(0,"div",50)(1,"button",51),c("click",function(){_(e);let r=g().$implicit,p=g(2);return x(p.approveAppointment(r.id))}),i(2," \u2713 Approve "),n(),t(3,"button",52),c("click",function(){_(e);let r=g().$implicit,p=g(2);return x(p.declineAppointment(r.id))}),i(4," \u2715 Decline "),n()()}}function se(a,l){if(a&1&&(t(0,"div",38)(1,"div",39)(2,"div",40)(3,"h3"),i(4),n(),t(5,"p",41),i(6),n()(),t(7,"span",42),i(8),n()(),t(9,"div",43)(10,"div",44)(11,"span",45),i(12,"Age:"),n(),t(13,"span",46),i(14),n()(),t(15,"div",44)(16,"span",45),i(17,"Deadline:"),n(),t(18,"span",46),i(19),b(20,"date"),n()(),u(21,de,5,1,"div",47),n(),u(22,pe,5,0,"div",48),n()),a&2){let e=l.$implicit;o(4),s(e.customerName),o(2),s(e.phoneNumber),o(),O("status-"+e.status.toLowerCase()),o(),h(" ",e.status," "),o(6),s(e.age),o(5),s(P(20,9,e.deadline,"medium")),o(2),m("ngIf",e.notes),o(),m("ngIf",e.status==="PENDING")}}function le(a,l){if(a&1&&(t(0,"div",53)(1,"div",54)(2,"span",55),i(3,"\u{1F4CB}"),n(),t(4,"h3"),i(5,"No appointments found"),n(),t(6,"p"),i(7),n()()()),a&2){let e=g(2);o(7),h("There are no ",e.selectedStatus==="ALL"?"":e.selectedStatus.toLowerCase()," appointments at the moment.")}}function me(a,l){if(a&1&&(t(0,"div",35),u(1,se,23,12,"div",36)(2,le,8,1,"div",37),n()),a&2){let e=g();o(),m("ngForOf",e.filteredAppointments),o(),m("ngIf",e.filteredAppointments.length===0)}}function ce(a,l){a&1&&(t(0,"div",56),S(1,"div",57),t(2,"p"),i(3,"Loading appointments..."),n()())}var Y=(()=>{class a{constructor(e){this.appointmentService=e,this.appointments=[],this.filteredAppointments=[],this.loading=!0,this.selectedStatus="ALL",this.statusOptions=[{value:"ALL",label:"All Appointments"},{value:"PENDING",label:"Pending"},{value:"APPROVED",label:"Approved"},{value:"IN_PROGRESS",label:"In Progress"},{value:"COMPLETED",label:"Completed"}]}ngOnInit(){this.loadAppointments()}loadAppointments(){this.loading=!0,this.appointmentService.getAllAppointments().subscribe({next:e=>{this.appointments=e,this.filterAppointments(),this.loading=!1},error:e=>{console.error("Error loading appointments:",e),this.loading=!1}})}filterAppointments(){this.selectedStatus==="ALL"?this.filteredAppointments=this.appointments:this.filteredAppointments=this.appointments.filter(e=>e.status===this.selectedStatus)}onStatusChange(e){this.selectedStatus=e,this.filterAppointments()}approveAppointment(e){this.appointmentService.approveAppointment(e).subscribe({next:()=>{this.loadAppointments()},error:d=>console.error("Error approving appointment:",d)})}declineAppointment(e){let d=prompt("Please provide a reason for declining:");d&&this.appointmentService.declineAppointment(e,d).subscribe({next:()=>{this.loadAppointments()},error:r=>console.error("Error declining appointment:",r)})}getPendingCount(){return this.appointments.filter(e=>e.status==="PENDING").length}getApprovedCount(){return this.appointments.filter(e=>e.status==="APPROVED").length}getCompletedCount(){return this.appointments.filter(e=>e.status==="COMPLETED").length}getUpcomingDeadlines(){let e=new Date,d=new Date(e.getTime()+7*24*60*60*1e3);return this.appointments.filter(r=>{let p=new Date(r.deadline);return p>=e&&p<=d&&r.status!=="COMPLETED"}).sort((r,p)=>new Date(r.deadline).getTime()-new Date(p.deadline).getTime()).slice(0,5)}static{this.\u0275fac=function(d){return new(d||a)(C(Q))}}static{this.\u0275cmp=v({type:a,selectors:[["app-admin-dashboard"]],decls:25,vars:7,consts:[["loadingTemplate",""],[1,"admin-layout"],[1,"dashboard-container"],[1,"top-bar"],[1,"dashboard-header"],[1,"dashboard-subtitle"],["aria-label","View notifications",1,"notification-btn"],[1,"bell-icon"],["class","badge",4,"ngIf"],["class","stats-grid",4,"ngIf"],["class","section upcoming-deadlines",4,"ngIf"],[1,"section"],[1,"section-header"],[1,"filters"],["id","status-filter","title","Filter appointments by status",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","appointments-list",4,"ngIf","ngIfElse"],[1,"badge"],[1,"stats-grid"],[1,"stat-card","pending"],[1,"stat-icon"],[1,"stat-content"],[1,"stat-card","approved"],[1,"stat-card","completed"],[1,"stat-card","total"],[1,"section","upcoming-deadlines"],[1,"deadline-list"],["class","deadline-card",4,"ngFor","ngForOf"],[1,"deadline-card"],[1,"deadline-date"],[1,"date"],[1,"month"],[1,"deadline-info"],[1,"status-badge"],[3,"value"],[1,"appointments-list"],["class","appointment-card",4,"ngFor","ngForOf"],["class","no-appointments",4,"ngIf"],[1,"appointment-card"],[1,"appointment-header"],[1,"customer-info"],[1,"phone"],[1,"status"],[1,"appointment-details"],[1,"detail-item"],[1,"label"],[1,"value"],["class","detail-item full-width",4,"ngIf"],["class","appointment-actions",4,"ngIf"],[1,"detail-item","full-width"],[1,"appointment-actions"],[1,"btn-approve",3,"click"],[1,"btn-decline",3,"click"],[1,"no-appointments"],[1,"empty-state"],[1,"empty-icon"],[1,"loading"],[1,"spinner"]],template:function(d,r){if(d&1){let p=A();t(0,"div",1),S(1,"app-sidebar"),t(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),i(6,"Admin Dashboard"),n(),t(7,"p",5),i(8,"Manage appointments and track your business metrics"),n()(),t(9,"button",6)(10,"span",7),i(11,"\u{1F514}"),n(),u(12,ne,2,1,"span",8),n()(),u(13,ie,33,4,"div",9)(14,oe,5,1,"div",10),t(15,"div",11)(16,"div",12)(17,"h2"),i(18,"All Appointments"),n(),t(19,"div",13)(20,"select",14),N("ngModelChange",function(M){return _(p),L(r.selectedStatus,M)||(r.selectedStatus=M),x(M)}),c("change",function(){return _(p),x(r.filterAppointments())}),u(21,re,2,2,"option",15),n()()(),u(22,me,3,2,"div",16)(23,ce,4,0,"ng-template",null,0,F),n()()()}if(d&2){let p=k(24);o(12),m("ngIf",r.getPendingCount()>0),o(),m("ngIf",!r.loading),o(),m("ngIf",!r.loading&&r.getUpcomingDeadlines().length>0),o(6),T("ngModel",r.selectedStatus),o(),m("ngForOf",r.statusOptions),o(),m("ngIf",!r.loading)("ngIfElse",p)}},dependencies:[z,R,J,q,H,G,W,X,$],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background:#12010a;color:#f8f5ff;font-family:system-ui,sans-serif}.admin-layout[_ngcontent-%COMP%]{display:flex;min-height:100vh}.dashboard-container[_ngcontent-%COMP%]{flex:1;max-width:1200px;padding:24px;margin:0 auto}.top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:24px}.dashboard-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700}.notification-btn[_ngcontent-%COMP%]{position:relative;border:none;border-radius:999px;padding:8px 12px;background:#05020acc;color:#f6e7c1;display:inline-flex;cursor:pointer}.badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-2px;min-width:18px;height:18px;padding:0 4px;border-radius:999px;background:#e63946;color:#fff;font-size:10px;font-weight:700;display:flex;align-items:center;justify-content:center}.stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:16px;margin-bottom:24px}.stat-card[_ngcontent-%COMP%]{background:#f8f9fa;padding:16px 18px;border-radius:12px;display:flex;align-items:center;gap:14px;border:1px solid #e9ecef}.stat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1.8rem;background:#0a0612e6}.stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;margin:0 0 4px}.stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:.85rem;color:#c3b6e6}.section[_ngcontent-%COMP%]{background:#05020ae6;border-radius:14px;padding:20px;margin-bottom:20px;border:1px solid rgba(246,231,193,.18)}.section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.3rem;margin:0 0 16px;color:#f6e7c1}.section-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:12px}.filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.6rem 1rem;border:1px solid rgba(246,231,193,.3);border-radius:8px;background:#06020ce6;color:#f8f5ff;font-size:.9rem}.upcoming-deadlines[_ngcontent-%COMP%]   .deadline-list[_ngcontent-%COMP%]{display:grid;gap:10px}.upcoming-deadlines[_ngcontent-%COMP%]   .deadline-card[_ngcontent-%COMP%]{display:flex;gap:12px;padding:12px;background:#0a0612e6;border-radius:10px;border-left:3px solid #d4af37}.upcoming-deadlines[_ngcontent-%COMP%]   .deadline-date[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;background:#05020ce6;border-radius:8px;padding:8px;min-width:70px}.deadline-date[_ngcontent-%COMP%]   .date[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#f8f5ff}.deadline-date[_ngcontent-%COMP%]   .month[_ngcontent-%COMP%]{font-size:.85rem;color:#c3b6e6}.upcoming-deadlines[_ngcontent-%COMP%]   .deadline-info[_ngcontent-%COMP%]{flex:1}.deadline-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .25rem;color:#f8f5ff;font-size:1.1rem}.deadline-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#c3b6e6;font-size:.9rem}.status-badge[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:8px;font-size:.8rem;font-weight:600}.status-badge.status-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status-badge.status-approved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.appointments-list[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.appointment-card[_ngcontent-%COMP%]{background:#f8f9fa;padding:1.5rem;border-radius:12px;border:1px solid #e9ecef}.appointment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:1rem;padding-bottom:1rem;border-bottom:2px solid #e9ecef}.customer-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#2d010c;font-size:1.2rem}.customer-info[_ngcontent-%COMP%]   .phone[_ngcontent-%COMP%]{margin:0;color:#6c757d;font-size:.9rem}.status[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:4px;font-size:.875rem;font-weight:500}.status.status-pending[_ngcontent-%COMP%]{background:#fff3cd;color:#856404}.status.status-approved[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.status.status-in_progress[_ngcontent-%COMP%]{background:#d1ecf1;color:#0c5460}.status.status-completed[_ngcontent-%COMP%]{background:#d4edda;color:#155724}.appointment-details[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:1rem}.detail-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.25rem}.detail-item.full-width[_ngcontent-%COMP%]{grid-column:1/-1}.detail-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:.85rem;color:#6c757d;font-weight:600}.detail-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;font-size:.95rem}.appointment-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;gap:1rem}.appointment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:4px;cursor:pointer}.btn-approve[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-decline[_ngcontent-%COMP%]{background:#f44336;color:#fff}.no-appointments[_ngcontent-%COMP%], .loading[_ngcontent-%COMP%]{text-align:center;padding:2rem}@media (max-width: 900px){.admin-layout[_ngcontent-%COMP%]{flex-direction:column}.stats-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,minmax(0,1fr))}}"]})}}return a})();var ge=[{path:"dashboard",component:Y},{path:"",redirectTo:"dashboard",pathMatch:"full"}],Se=(()=>{class a{static{this.\u0275fac=function(d){return new(d||a)}}static{this.\u0275mod=w({type:a})}static{this.\u0275inj=y({imports:[V,K,B.forChild(ge)]})}}return a})();export{Se as AdminModule};
