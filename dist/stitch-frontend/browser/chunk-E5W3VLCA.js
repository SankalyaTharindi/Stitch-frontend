import{c as j,e as U,i as B,j as G,k as W,m as z}from"./chunk-QGL2CCPC.js";import{$ as L,C as r,D as M,I as g,J as l,L as O,M as p,N as n,P as v,Q as _,R as m,S,T as o,U as I,V as c,W as E,X as y,Y as D,_ as w,aa as N,ia as k,ja as T,ka as $,la as R,ma as F,n as b,o as C,q as A,r as x,s as P,v as u,w as f,wa as V}from"./chunk-OHJWSX5H.js";var J=(()=>{class e{constructor(t){this.http=t,this.API_URL="http://localhost:8080/api"}createAppointment(t,i){let a=new FormData;return a.append("appointment",new Blob([JSON.stringify(t)],{type:"application/json"})),i&&a.append("image",i),this.http.post(`${this.API_URL}/customer/appointments`,a)}getMyAppointments(){return this.http.get(`${this.API_URL}/customer/appointments`)}getAllAppointments(){return this.http.get(`${this.API_URL}/admin/appointments`)}getAppointmentById(t){return this.http.get(`${this.API_URL}/admin/appointments/${t}`)}approveAppointment(t){return this.http.put(`${this.API_URL}/admin/appointments/${t}/approve`,{})}declineAppointment(t,i){return this.http.put(`${this.API_URL}/admin/appointments/${t}/decline`,{reason:i})}updateAppointmentStatus(t,i){return this.http.put(`${this.API_URL}/admin/appointments/${t}/status`,{status:i})}static{this.\u0275fac=function(i){return new(i||e)(A(F))}}static{this.\u0275prov=b({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function X(e,s){if(e&1&&(p(0,"option",7),o(1),n()),e&2){let t=s.$implicit;l("value",t.value),r(),c(" ",t.label," ")}}function Y(e,s){if(e&1&&(p(0,"p")(1,"strong"),o(2,"Notes:"),n(),o(3),n()),e&2){let t=m().$implicit;r(3),c(" ",t.notes,"")}}function Z(e,s){if(e&1){let t=v();p(0,"div",17)(1,"button",18),_("click",function(){u(t);let a=m().$implicit,d=m(2);return f(d.approveAppointment(a.id))}),o(2," Approve "),n(),p(3,"button",19),_("click",function(){u(t);let a=m().$implicit,d=m(2);return f(d.declineAppointment(a.id))}),o(4," Decline "),n()()}}function tt(e,s){if(e&1&&(p(0,"div",11)(1,"div",12)(2,"h3"),o(3),n(),p(4,"span",13),o(5),n()(),p(6,"div",14)(7,"p")(8,"strong"),o(9,"Age:"),n(),o(10),n(),p(11,"p")(12,"strong"),o(13,"Phone:"),n(),o(14),n(),p(15,"p")(16,"strong"),o(17,"Deadline:"),n(),o(18),w(19,"date"),n(),g(20,Y,4,1,"p",15),n(),g(21,Z,5,0,"div",16),n()),e&2){let t=s.$implicit;r(3),I(t.customerName),r(),O("status-"+t.status.toLowerCase()),r(),c(" ",t.status," "),r(5),c(" ",t.age,""),r(4),c(" ",t.phoneNumber,""),r(4),c(" ",L(19,9,t.deadline),""),r(2),l("ngIf",t.notes),r(),l("ngIf",t.status==="PENDING")}}function et(e,s){e&1&&(p(0,"div",20),o(1," No appointments found. "),n())}function nt(e,s){if(e&1&&(p(0,"div",8),g(1,tt,22,11,"div",9)(2,et,2,0,"div",10),n()),e&2){let t=m();r(),l("ngForOf",t.filteredAppointments),r(),l("ngIf",t.filteredAppointments.length===0)}}function it(e,s){e&1&&(p(0,"div",21),o(1,"Loading appointments..."),n())}var q=(()=>{class e{constructor(t){this.appointmentService=t,this.appointments=[],this.filteredAppointments=[],this.loading=!0,this.selectedStatus="ALL",this.statusOptions=[{value:"ALL",label:"All Appointments"},{value:"PENDING",label:"Pending"},{value:"APPROVED",label:"Approved"},{value:"IN_PROGRESS",label:"In Progress"},{value:"COMPLETED",label:"Completed"}]}ngOnInit(){this.loadAppointments()}loadAppointments(){this.loading=!0,this.appointmentService.getAllAppointments().subscribe({next:t=>{this.appointments=t,this.filterAppointments(),this.loading=!1},error:t=>{console.error("Error loading appointments:",t),this.loading=!1}})}filterAppointments(){this.selectedStatus==="ALL"?this.filteredAppointments=this.appointments:this.filteredAppointments=this.appointments.filter(t=>t.status===this.selectedStatus)}onStatusChange(t){this.selectedStatus=t,this.filterAppointments()}approveAppointment(t){this.appointmentService.approveAppointment(t).subscribe({next:()=>{this.loadAppointments()},error:i=>console.error("Error approving appointment:",i)})}declineAppointment(t){let i=prompt("Please provide a reason for declining:");i&&this.appointmentService.declineAppointment(t,i).subscribe({next:()=>{this.loadAppointments()},error:a=>console.error("Error declining appointment:",a)})}static{this.\u0275fac=function(i){return new(i||e)(M(J))}}static{this.\u0275cmp=x({type:e,selectors:[["app-admin-dashboard"]],decls:11,vars:4,consts:[["loadingTemplate",""],[1,"dashboard-container"],[1,"filters"],["for","status-filter"],["id","status-filter",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","appointments-list",4,"ngIf","ngIfElse"],[3,"value"],[1,"appointments-list"],["class","appointment-card",4,"ngFor","ngForOf"],["class","no-appointments",4,"ngIf"],[1,"appointment-card"],[1,"appointment-header"],[1,"status"],[1,"appointment-details"],[4,"ngIf"],["class","appointment-actions",4,"ngIf"],[1,"appointment-actions"],[1,"btn-approve",3,"click"],[1,"btn-decline",3,"click"],[1,"no-appointments"],[1,"loading"]],template:function(i,a){if(i&1){let d=v();p(0,"div",1)(1,"h1"),o(2,"Admin Dashboard"),n(),p(3,"div",2)(4,"label",3),o(5,"Filter by Status:"),n(),p(6,"select",4),D("ngModelChange",function(h){return u(d),y(a.selectedStatus,h)||(a.selectedStatus=h),f(h)}),_("change",function(){return u(d),f(a.filterAppointments())}),g(7,X,2,2,"option",5),n()(),g(8,nt,3,2,"div",6)(9,it,2,0,"ng-template",null,0,N),n()}if(i&2){let d=S(10);r(6),E("ngModel",a.selectedStatus),r(),l("ngForOf",a.statusOptions),r(),l("ngIf",!a.loading)("ngIfElse",d)}},dependencies:[k,T,G,W,B,j,U,$],styles:[".dashboard-container[_ngcontent-%COMP%]{padding:2rem;max-width:1200px;margin:0 auto}h1[_ngcontent-%COMP%]{color:#333;margin-bottom:1.5rem}.filters[_ngcontent-%COMP%]{margin-bottom:2rem}.filters[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:1rem;font-weight:500}.filters[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ddd;border-radius:4px}.appointments-list[_ngcontent-%COMP%]{display:grid;gap:1rem}.appointment-card[_ngcontent-%COMP%]{background:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 4px #0000001a}.appointment-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.appointment-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.status[_ngcontent-%COMP%]{padding:.25rem .75rem;border-radius:4px;font-size:.875rem;font-weight:500}.status.status-pending[_ngcontent-%COMP%]{background-color:#fff3cd;color:#856404}.status.status-approved[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.status.status-in_progress[_ngcontent-%COMP%]{background-color:#d1ecf1;color:#0c5460}.status.status-completed[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.appointment-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.5rem 0;color:#555}.appointment-actions[_ngcontent-%COMP%]{margin-top:1rem;display:flex;gap:1rem}.appointment-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:4px;cursor:pointer;font-weight:500}.appointment-actions[_ngcontent-%COMP%]   button.btn-approve[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.appointment-actions[_ngcontent-%COMP%]   button.btn-approve[_ngcontent-%COMP%]:hover{background-color:#45a049}.appointment-actions[_ngcontent-%COMP%]   button.btn-decline[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.appointment-actions[_ngcontent-%COMP%]   button.btn-decline[_ngcontent-%COMP%]:hover{background-color:#da190b}.no-appointments[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#999}.loading[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#666}"]})}}return e})();var ot=[{path:"dashboard",component:q},{path:"",redirectTo:"dashboard",pathMatch:"full"}],gt=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=P({type:e})}static{this.\u0275inj=C({imports:[R,z,V.forChild(ot)]})}}return e})();export{gt as AdminModule};
