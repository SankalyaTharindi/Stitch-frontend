import{a as T}from"./chunk-TKBUKJXS.js";import{a as ne,b as ie,c as V}from"./chunk-BTJ6ZXPL.js";import{a as Y,c as J,d as H,e as K,f as Q,g as X,h as Z,n as $,o as ee,q as te}from"./chunk-RMUC5KL2.js";import{$ as w,C as U,D as s,E as O,J as f,L as l,M as y,N as G,P as t,Q as n,R as h,S as P,T as _,U as c,V as j,W as a,X as b,Y as C,Z as S,_ as k,ba as I,ca as A,la as D,ma as M,na as N,o as F,oa as W,r as v,s as R,v as g,w as u,xa as L,y as E,ya as q}from"./chunk-7MOYBRMF.js";function pe(i,m){i&1&&(t(0,"div",4),h(1,"div",5),t(2,"p"),a(3,"Loading appointments..."),n()())}function le(i,m){if(i&1&&(t(0,"div",16)(1,"span",17),a(2,"notes"),n(),t(3,"div",18)(4,"span",19),a(5,"Notes"),n(),t(6,"span",20),a(7),n()()()),i&2){let e=c().$implicit;s(7),b(e.notes)}}function de(i,m){if(i&1){let e=P();t(0,"div",23)(1,"button",24),_("click",function(){g(e);let o=c().$implicit,p=c(3);return u(p.onCancel(o.id))}),t(2,"span",17),a(3,"cancel"),n(),a(4," Cancel "),n()()}}function ce(i,m){if(i&1&&(t(0,"div",11)(1,"div",12)(2,"div",13),a(3),n(),t(4,"span",14),a(5),n()(),t(6,"div",15)(7,"div",16)(8,"span",17),a(9,"event"),n(),t(10,"div",18)(11,"span",19),a(12,"Deadline"),n(),t(13,"span",20),a(14),I(15,"date"),n()()(),t(16,"div",16)(17,"span",17),a(18,"phone"),n(),t(19,"div",18)(20,"span",19),a(21,"Contact"),n(),t(22,"span",20),a(23),n()()(),f(24,le,8,1,"div",21),n(),f(25,de,5,0,"div",22),n()),i&2){let e=m.$implicit,r=c(3);s(),y("border-left-color",r.getStatusColor(e.status)),s(),y("background-color",r.getStatusColor(e.status)),s(),C(" ",e.status," "),s(2),C("#",e.id,""),s(9),b(A(15,10,e.deadline,"medium")),s(9),b(e.phoneNumber),s(),l("ngIf",e.notes),s(),l("ngIf",e.status==="PENDING")}}function me(i,m){if(i&1&&(t(0,"div",8)(1,"h3"),a(2,"Current Appointments"),n(),t(3,"div",9),f(4,ce,26,13,"div",10),n()()),i&2){let e=c(2);s(4),l("ngForOf",e.currentAppointments)}}function ge(i,m){if(i&1&&(t(0,"div",26)(1,"div",12)(2,"div",27),a(3),n(),t(4,"span",14),a(5),n()(),t(6,"div",15)(7,"div",16)(8,"span",17),a(9,"event"),n(),t(10,"div",18)(11,"span",19),a(12,"Completed On"),n(),t(13,"span",20),a(14),I(15,"date"),n()()()()()),i&2){let e=m.$implicit,r=c(3);s(),y("border-left-color",r.getStatusColor(e.status)),s(2),C(" ",e.status," "),s(2),C("#",e.id,""),s(9),b(A(15,5,e.deadline,"medium"))}}function ue(i,m){if(i&1&&(t(0,"div",8)(1,"h3"),a(2,"Past Appointments"),n(),t(3,"div",9),f(4,ge,16,8,"div",25),n()()),i&2){let e=c(2);s(4),l("ngForOf",e.pastAppointments)}}function fe(i,m){i&1&&(t(0,"div",28)(1,"span",29),a(2,"event_busy"),n(),t(3,"h3"),a(4,"No Appointments Yet"),n(),t(5,"p"),a(6,"Book your first appointment to get started!"),n()())}function _e(i,m){if(i&1&&(t(0,"div"),f(1,me,5,1,"div",6)(2,ue,5,1,"div",6)(3,fe,7,0,"div",7),n()),i&2){let e=c();s(),l("ngIf",e.currentAppointments.length>0),s(),l("ngIf",e.pastAppointments.length>0),s(),l("ngIf",e.appointments.length===0)}}var oe=(()=>{class i{constructor(){this.appointments=[],this.loading=!1,this.cancel=new E}get currentAppointments(){return this.appointments.filter(e=>e.status==="PENDING"||e.status==="APPROVED"||e.status==="IN_PROGRESS")}get pastAppointments(){return this.appointments.filter(e=>e.status==="COMPLETED")}onCancel(e){confirm("Are you sure you want to cancel this appointment?")&&this.cancel.emit(e)}getStatusColor(e){return{PENDING:"#ffc107",APPROVED:"#28a745",IN_PROGRESS:"#17a2b8",COMPLETED:"#6c757d"}[e]||"#6c757d"}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-my-appointments"]],inputs:{appointments:"appointments",loading:"loading"},outputs:{cancel:"cancel"},decls:5,vars:2,consts:[[1,"appointments-section"],[1,"section-title"],["class","loading",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"spinner"],["class","subsection",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"subsection"],[1,"appointments-grid"],["class","appointment-card",4,"ngFor","ngForOf"],[1,"appointment-card"],[1,"card-header"],[1,"status-badge"],[1,"appointment-id"],[1,"card-body"],[1,"info-row"],[1,"material-icons"],[1,"info-content"],[1,"label"],[1,"value"],["class","info-row",4,"ngIf"],["class","card-actions",4,"ngIf"],[1,"card-actions"],[1,"btn-cancel",3,"click"],["class","appointment-card past",4,"ngFor","ngForOf"],[1,"appointment-card","past"],[1,"status-badge","completed"],[1,"empty-state"],[1,"material-icons","empty-icon"]],template:function(r,o){r&1&&(t(0,"div",0)(1,"h2",1),a(2,"My Appointments"),n(),f(3,pe,4,0,"div",2)(4,_e,4,3,"div",3),n()),r&2&&(s(3),l("ngIf",o.loading),s(),l("ngIf",!o.loading))},dependencies:[D,M,N],styles:[".appointments-section[_ngcontent-%COMP%]{background:#05020ae6;border-radius:14px;padding:24px;border:1px solid rgba(212,175,55,.18)}.section-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:700;color:#fff;margin:0 0 24px;display:flex;align-items:center;gap:12px}.subsection[_ngcontent-%COMP%]{margin-bottom:32px}.subsection[_ngcontent-%COMP%]:last-child{margin-bottom:0}.subsection[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;color:#f4e5c3;margin:0 0 16px;padding-bottom:8px;border-bottom:1px solid rgba(212,175,55,.2)}.appointments-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:16px}.appointment-card[_ngcontent-%COMP%]{background:#280f0a99;border-radius:12px;border:1px solid rgba(212,175,55,.2);overflow:hidden;transition:transform .2s}.appointment-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.appointment-card.past[_ngcontent-%COMP%]{opacity:.8}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#0000004d;border-left:4px solid}.status-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:12px;font-size:.75rem;font-weight:600;color:#fff;text-transform:uppercase}.status-badge.completed[_ngcontent-%COMP%]{background:#6c757d!important}.appointment-id[_ngcontent-%COMP%]{font-size:.85rem;color:#c3b6e6;font-weight:600}.card-body[_ngcontent-%COMP%]{padding:16px}.info-row[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:12px;align-items:flex-start}.info-row[_ngcontent-%COMP%]:last-child{margin-bottom:0}.info-row[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px;color:#d4af37;margin-top:2px}.info-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:2px}.label[_ngcontent-%COMP%]{font-size:.75rem;color:#c3b6e6;text-transform:uppercase;font-weight:600}.value[_ngcontent-%COMP%]{font-size:.9rem;color:#f4e5c3}.card-actions[_ngcontent-%COMP%]{padding:12px 16px;border-top:1px solid rgba(212,175,55,.1);display:flex;justify-content:flex-end}.btn-cancel[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 16px;border:1px solid #dc3545;background:transparent;color:#dc3545;border-radius:6px;cursor:pointer;font-size:.85rem;transition:all .2s}.btn-cancel[_ngcontent-%COMP%]:hover{background:#dc3545;color:#fff}.btn-cancel[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:18px}.empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px}.empty-icon[_ngcontent-%COMP%]{font-size:64px;color:#d4af37;opacity:.3;display:block;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#f4e5c3;margin:0 0 8px;font-size:1.3rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c3b6e6;margin:0}.loading[_ngcontent-%COMP%]{text-align:center;padding:48px}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;margin:0 auto 16px;border:4px solid rgba(212,175,55,.2);border-top:4px solid #d4af37;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#c3b6e6;margin:0}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 768px){.appointments-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return i})();function be(i,m){if(i&1&&(t(0,"div",9)(1,"div",10)(2,"span",2),a(3),n()(),t(4,"span",11),a(5),n()()),i&2){let e=m.$implicit,r=c();G("active",r.isStepActive(e.value))("current",r.status===e.value),s(3),b(e.icon),s(2),b(e.label)}}function he(i,m){if(i&1&&(t(0,"div",12)(1,"span",2),a(2,"event"),n(),t(3,"div")(4,"span",13),a(5,"Expected Completion"),n(),t(6,"span",14),a(7),I(8,"date"),n()()()),i&2){let e=c();s(7),b(A(8,1,e.deadline,"fullDate"))}}var ae=(()=>{class i{constructor(){this.status="PENDING",this.deadline=""}getProgressPercentage(){return{PENDING:25,APPROVED:50,IN_PROGRESS:75,COMPLETED:100}[this.status]||0}getStatusSteps(){return[{label:"Pending",value:"PENDING",icon:"schedule"},{label:"Approved",value:"APPROVED",icon:"check_circle"},{label:"In Progress",value:"IN_PROGRESS",icon:"construction"},{label:"Completed",value:"COMPLETED",icon:"celebration"}]}isStepActive(e){let r=["PENDING","APPROVED","IN_PROGRESS","COMPLETED"],o=r.indexOf(this.status);return r.indexOf(e)<=o}static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275cmp=v({type:i,selectors:[["app-order-status"]],inputs:{status:"status",deadline:"deadline"},decls:11,vars:4,consts:[[1,"order-status-section"],[1,"section-title"],[1,"material-icons"],[1,"status-tracker"],[1,"progress-bar"],[1,"progress-fill"],[1,"status-steps"],["class","status-step",3,"active","current",4,"ngFor","ngForOf"],["class","deadline-info",4,"ngIf"],[1,"status-step"],[1,"step-icon"],[1,"step-label"],[1,"deadline-info"],[1,"deadline-label"],[1,"deadline-date"]],template:function(r,o){r&1&&(t(0,"div",0)(1,"h2",1)(2,"span",2),a(3,"track_changes"),n(),a(4," Real-Time Order Status "),n(),t(5,"div",3)(6,"div",4),h(7,"div",5),n(),t(8,"div",6),f(9,be,6,6,"div",7),n(),f(10,he,9,4,"div",8),n()()),r&2&&(s(7),y("width",o.getProgressPercentage(),"%"),s(2),l("ngForOf",o.getStatusSteps()),s(),l("ngIf",o.deadline))},dependencies:[D,M,N],styles:[".order-status-section[_ngcontent-%COMP%]{background:#05020ae6;border-radius:14px;padding:24px;border:1px solid rgba(212,175,55,.18);margin-bottom:24px}.section-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;color:#d4af37;margin:0 0 24px;display:flex;align-items:center;gap:12px}.section-title[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:32px}.status-tracker[_ngcontent-%COMP%]{background:#280f0a99;border-radius:12px;padding:32px;border:1px solid rgba(212,175,55,.2)}.progress-bar[_ngcontent-%COMP%]{height:6px;background:#d4af3733;border-radius:3px;margin-bottom:32px;overflow:hidden}.progress-fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#d4af37,#f4e5c3);transition:width .5s ease;border-radius:3px}.status-steps[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}.status-step[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:8px;opacity:.5;transition:opacity .3s}.status-step.active[_ngcontent-%COMP%]{opacity:1}.status-step.current[_ngcontent-%COMP%]   .step-icon[_ngcontent-%COMP%]{background:#d4af37;box-shadow:0 0 20px #d4af3780}.step-icon[_ngcontent-%COMP%]{width:56px;height:56px;border-radius:50%;background:#d4af3733;display:flex;align-items:center;justify-content:center;border:2px solid rgba(212,175,55,.3);transition:all .3s}.step-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:28px;color:#d4af37}.step-label[_ngcontent-%COMP%]{font-size:.85rem;color:#f4e5c3;text-align:center;font-weight:600}.deadline-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background:#0000004d;border-radius:8px;border-left:4px solid #d4af37}.deadline-info[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px;color:#d4af37}.deadline-label[_ngcontent-%COMP%]{display:block;font-size:.75rem;color:#c3b6e6;text-transform:uppercase;font-weight:600;margin-bottom:4px}.deadline-date[_ngcontent-%COMP%]{display:block;font-size:1rem;color:#f4e5c3;font-weight:600}@media (max-width: 768px){.status-steps[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:24px}.step-icon[_ngcontent-%COMP%]{width:48px;height:48px}.step-icon[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px}}"]})}}return i})();function Me(i,m){if(i&1){let e=P();t(0,"div",30),_("click",function(){g(e),c();let o=j(37);return u(o.click())}),t(1,"span",5),a(2,"cloud_upload"),n(),t(3,"p"),a(4,"Click to upload inspiration image"),n(),t(5,"span",31),a(6,"PNG, JPG, JPEG up to 10MB"),n()()}}function Oe(i,m){if(i&1){let e=P();t(0,"div",32),h(1,"img",33),t(2,"button",34),_("click",function(){g(e);let o=c();return u(o.removeImage())}),t(3,"span",5),a(4,"close"),n()()()}if(i&2){let e=c();s(),l("src",e.previewUrl,U)}}function ye(i,m){if(i&1&&(t(0,"div",35)(1,"span",5),a(2,"error"),n(),a(3),n()),i&2){let e=c();s(3),C(" ",e.errorMessage," ")}}function Se(i,m){i&1&&(t(0,"span"),a(1,"Book Appointment"),n())}function ke(i,m){i&1&&(t(0,"span"),a(1,"Booking..."),n())}var re=(()=>{class i{constructor(e,r,o){this.appointmentService=e,this.authService=r,this.router=o,this.close=new E,this.success=new E,this.formData={customerName:"",age:0,phoneNumber:"",deadline:"",notes:"",inspoImageUrl:""},this.selectedFile=null,this.previewUrl=null,this.loading=!1,this.errorMessage=""}onFileSelected(e){let r=e.target;if(r.files&&r.files[0]){this.selectedFile=r.files[0];let o=new FileReader;o.onload=p=>{this.previewUrl=p.target?.result},o.readAsDataURL(this.selectedFile)}}removeImage(){this.selectedFile=null,this.previewUrl=null,this.formData.inspoImageUrl=""}onSubmit(){this.errorMessage="";let e=this.authService.getToken(),r=this.authService.currentUserValue;if(console.log("Token exists:",!!e),console.log("Current user:",r),!e||!r){this.errorMessage="Please login to book an appointment.",setTimeout(()=>{this.router.navigate(["/auth/login"])},2e3);return}if(!this.formData.customerName||!this.formData.phoneNumber||!this.formData.deadline){this.errorMessage="Please fill in all required fields";return}this.loading=!0,this.previewUrl&&(this.formData.inspoImageUrl=this.previewUrl);let o={customerName:this.formData.customerName,age:this.formData.age||0,phoneNumber:this.formData.phoneNumber,deadline:this.formData.deadline,notes:this.formData.notes||"",inspoImageUrl:this.formData.inspoImageUrl||"",status:"PENDING"};console.log("Submitting appointment:",o),this.appointmentService.createAppointment(o,this.selectedFile||void 0).subscribe({next:p=>{console.log("Appointment created successfully:",p),this.loading=!1,this.success.emit(),this.onClose()},error:p=>{if(console.error("Error creating appointment:",p),console.error("Error details:",p.error),console.error("Status:",p.status),p.status===0)this.errorMessage="Cannot connect to server. Please check if the backend is running.";else if(p.status===401||p.status===403){this.errorMessage="Session expired. Please login again.",this.loading=!1,setTimeout(()=>{this.authService.logout()},2e3);return}else p.error?.message?this.errorMessage=p.error.message:this.errorMessage="Failed to create appointment. Please try again.";this.loading=!1}})}onClose(){this.close.emit()}static{this.\u0275fac=function(r){return new(r||i)(O(V),O(T),O(L))}}static{this.\u0275cmp=v({type:i,selectors:[["app-book-appointment-popup"]],outputs:{close:"close",success:"success"},decls:51,vars:12,consts:[["fileInput",""],[1,"modal-overlay",3,"click"],[1,"modal-content",3,"click"],[1,"modal-header"],["aria-label","Close",1,"close-btn",3,"click"],[1,"material-icons"],[1,"appointment-form",3,"ngSubmit"],[1,"form-group"],["for","customerName"],[1,"required"],["type","text","id","customerName","name","customerName","placeholder","Enter your full name","required","",3,"ngModelChange","ngModel"],[1,"form-row"],["for","age"],["type","number","id","age","name","age","placeholder","Your age","min","1",3,"ngModelChange","ngModel"],["for","phoneNumber"],["type","tel","id","phoneNumber","name","phoneNumber","placeholder","Enter phone number","required","",3,"ngModelChange","ngModel"],["for","deadline"],["type","date","id","deadline","name","deadline","required","",3,"ngModelChange","ngModel"],["for","inspoImage"],[1,"file-upload-area"],["type","file","id","inspoImage","accept","image/*",1,"file-input",3,"change"],["class","upload-placeholder",3,"click",4,"ngIf"],["class","image-preview",4,"ngIf"],["for","notes"],["id","notes","name","notes","rows","4","placeholder","Add detailed requirements, measurements, or any special instructions...",3,"ngModelChange","ngModel"],["class","error-message",4,"ngIf"],[1,"form-actions"],["type","button",1,"btn-secondary",3,"click","disabled"],["type","submit",1,"btn-primary",3,"disabled"],[4,"ngIf"],[1,"upload-placeholder",3,"click"],[1,"hint"],[1,"image-preview"],["alt","Preview",3,"src"],["type","button",1,"remove-image-btn",3,"click"],[1,"error-message"]],template:function(r,o){if(r&1){let p=P();t(0,"div",1),_("click",function(){return g(p),u(o.onClose())}),t(1,"div",2),_("click",function(d){return g(p),u(d.stopPropagation())}),t(2,"div",3)(3,"h2"),a(4,"Book an Appointment"),n(),t(5,"button",4),_("click",function(){return g(p),u(o.onClose())}),t(6,"span",5),a(7,"close"),n()()(),t(8,"form",6),_("ngSubmit",function(){return g(p),u(o.onSubmit())}),t(9,"div",7)(10,"label",8),a(11,"Full Name "),t(12,"span",9),a(13,"*"),n()(),t(14,"input",10),w("ngModelChange",function(d){return g(p),k(o.formData.customerName,d)||(o.formData.customerName=d),u(d)}),n()(),t(15,"div",11)(16,"div",7)(17,"label",12),a(18,"Age"),n(),t(19,"input",13),w("ngModelChange",function(d){return g(p),k(o.formData.age,d)||(o.formData.age=d),u(d)}),n()(),t(20,"div",7)(21,"label",14),a(22,"Phone Number "),t(23,"span",9),a(24,"*"),n()(),t(25,"input",15),w("ngModelChange",function(d){return g(p),k(o.formData.phoneNumber,d)||(o.formData.phoneNumber=d),u(d)}),n()()(),t(26,"div",7)(27,"label",16),a(28,"Preferred Deadline "),t(29,"span",9),a(30,"*"),n()(),t(31,"input",17),w("ngModelChange",function(d){return g(p),k(o.formData.deadline,d)||(o.formData.deadline=d),u(d)}),n()(),t(32,"div",7)(33,"label",18),a(34,"Inspiration Image"),n(),t(35,"div",19)(36,"input",20,0),_("change",function(d){return g(p),u(o.onFileSelected(d))}),n(),f(38,Me,7,0,"div",21)(39,Oe,5,1,"div",22),n()(),t(40,"div",7)(41,"label",23),a(42,"Requirements & Notes"),n(),t(43,"textarea",24),w("ngModelChange",function(d){return g(p),k(o.formData.notes,d)||(o.formData.notes=d),u(d)}),n()(),f(44,ye,4,1,"div",25),t(45,"div",26)(46,"button",27),_("click",function(){return g(p),u(o.onClose())}),a(47," Cancel "),n(),t(48,"button",28),f(49,Se,2,0,"span",29)(50,ke,2,0,"span",29),n()()()()()}r&2&&(s(14),S("ngModel",o.formData.customerName),s(5),S("ngModel",o.formData.age),s(6),S("ngModel",o.formData.phoneNumber),s(6),S("ngModel",o.formData.deadline),s(7),l("ngIf",!o.previewUrl),s(),l("ngIf",o.previewUrl),s(4),S("ngModel",o.formData.notes),s(),l("ngIf",o.errorMessage),s(2),l("disabled",o.loading),s(2),l("disabled",o.loading),s(),l("ngIf",!o.loading),s(),l("ngIf",o.loading))},dependencies:[M,X,Y,Z,J,H,ee,$,Q,K],styles:[".modal-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000d9;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);display:flex;align-items:center;justify-content:center;z-index:2000;padding:1rem;animation:_ngcontent-%COMP%_fadeIn .2s ease}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.modal-content[_ngcontent-%COMP%]{background:linear-gradient(145deg,#12010afa,#1e050ffa);border:2px solid rgba(212,175,55,.3);border-radius:16px;max-width:600px;width:100%;max-height:90vh;overflow-y:auto;box-shadow:0 20px 60px #00000080;animation:_ngcontent-%COMP%_slideUp .3s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{transform:translateY(20px);opacity:0}to{transform:translateY(0);opacity:1}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:1.5rem;border-bottom:1px solid rgba(212,175,55,.2)}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#f4e5c3;font-size:1.5rem;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:transparent;border:none;color:#d4af37;cursor:pointer;width:36px;height:36px;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:background .2s}.close-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:24px}.close-btn[_ngcontent-%COMP%]:hover{background:#d4af3726}.appointment-form[_ngcontent-%COMP%]{padding:1.5rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.25rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#d4af37;font-size:.9rem;font-weight:500;margin-bottom:.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ff6b6b}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;padding:.75rem;background:#ffffff0d;border:1.5px solid rgba(212,175,55,.3);border-radius:8px;color:#f4e5c3;font-size:.95rem;transition:all .2s;box-sizing:border-box;font-family:inherit}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]::placeholder{color:#f4e5c366}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#d4af37;background:#ffffff14}.form-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:100px}.form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1rem}@media (max-width: 600px){.form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}}.file-upload-area[_ngcontent-%COMP%]{position:relative}.file-input[_ngcontent-%COMP%]{display:none}.upload-placeholder[_ngcontent-%COMP%]{border:2px dashed rgba(212,175,55,.4);border-radius:8px;padding:2rem;text-align:center;cursor:pointer;transition:all .2s}.upload-placeholder[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:48px;color:#d4af37;margin-bottom:.5rem}.upload-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f4e5c3;margin:.5rem 0;font-size:.95rem}.upload-placeholder[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:#f4e5c399;font-size:.85rem}.upload-placeholder[_ngcontent-%COMP%]:hover{border-color:#d4af37;background:#d4af370d}.image-preview[_ngcontent-%COMP%]{position:relative;border-radius:8px;overflow:hidden}.image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;display:block}.remove-image-btn[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;width:32px;height:32px;border-radius:50%;background:#f00c;border:none;color:#fff;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:background .2s}.remove-image-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.remove-image-btn[_ngcontent-%COMP%]:hover{background:red}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;color:#ff6b6b;background:#ff6b6b1a;padding:.75rem;border-radius:8px;margin-bottom:1rem;font-size:.9rem}.error-message[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-top:1.5rem}.btn-secondary[_ngcontent-%COMP%], .btn-primary[_ngcontent-%COMP%]{flex:1;padding:.875rem;border-radius:8px;font-size:.95rem;font-weight:600;cursor:pointer;transition:all .2s;border:none}.btn-secondary[_ngcontent-%COMP%]:disabled, .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#ffffff14;color:#e5d9ff;border:1px solid rgba(255,255,255,.2);flex:.8}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#ffffff1f}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#d4af37,#f4e5c3,#d4af37);color:#12010a;font-weight:700}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 4px 12px #d4af3766}@media (max-width: 600px){.modal-content[_ngcontent-%COMP%]{margin:0;max-height:100vh;border-radius:0}.form-actions[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return i})();function Ee(i,m){if(i&1&&(t(0,"span",14),a(1),n()),i&2){let e=c();s(),b(e.appointments.length)}}function Ie(i,m){if(i&1&&h(0,"app-order-status",15),i&2){let e=c();l("status",e.currentAppointment.status)("deadline",e.currentAppointment.deadline)}}function Ae(i,m){if(i&1){let e=P();t(0,"app-book-appointment-popup",16),_("close",function(){g(e);let o=c();return u(o.closeBookingPopup())})("success",function(){g(e);let o=c();return u(o.onBookingSuccess())}),n()}}var se=(()=>{class i{constructor(e,r){this.authService=e,this.appointmentService=r,this.currentUser=null,this.appointments=[],this.loading=!0,this.currentAppointment=null,this.showBookingPopup=!1,this.customerNavItems=[{label:"Dashboard",route:"/customer/dashboard",icon:"dashboard"},{label:"Book Appointment",route:"/customer/book-appointment",icon:"event_available"},{label:"Gallery",route:"/customer/gallery",icon:"collections"}]}ngOnInit(){this.currentUser=this.authService.currentUserValue,this.loadAppointments()}loadAppointments(){this.loading=!0,this.appointmentService.getMyAppointments().subscribe({next:e=>{this.appointments=e,this.currentAppointment=this.getCurrentAppointment(),this.loading=!1},error:e=>{console.error("Error loading appointments:",e),this.loading=!1}})}getCurrentAppointment(){return this.appointments.find(r=>r.status==="APPROVED"||r.status==="IN_PROGRESS")||this.appointments.find(r=>r.status==="PENDING")||null}cancelAppointment(e){this.appointmentService.cancelAppointment(e).subscribe({next:()=>{this.loadAppointments()},error:r=>console.error("Error canceling appointment:",r)})}openBookingPopup(){this.showBookingPopup=!0}closeBookingPopup(){this.showBookingPopup=!1}onBookingSuccess(){this.showBookingPopup=!1,this.loadAppointments()}static{this.\u0275fac=function(r){return new(r||i)(O(T),O(V))}}static{this.\u0275cmp=v({type:i,selectors:[["app-customer-dashboard"]],decls:23,vars:8,consts:[[1,"customer-layout"],[3,"title","navItems"],[1,"dashboard-container"],[1,"top-bar"],[1,"dashboard-header"],[1,"header-actions"],["aria-label","View messages",1,"notification-btn"],[1,"material-icons"],["aria-label","View notifications",1,"notification-btn"],["class","badge",4,"ngIf"],[1,"book-appointment-btn",3,"click"],[3,"status","deadline",4,"ngIf"],[3,"cancel","appointments","loading"],[3,"close","success",4,"ngIf"],[1,"badge"],[3,"status","deadline"],[3,"close","success"]],template:function(r,o){r&1&&(t(0,"div",0),h(1,"app-shared-sidebar",1),t(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),a(6),n()(),t(7,"div",5)(8,"button",6)(9,"span",7),a(10,"mail"),n()(),t(11,"button",8)(12,"span",7),a(13,"notifications"),n(),f(14,Ee,2,1,"span",9),n(),t(15,"button",10),_("click",function(){return o.openBookingPopup()}),t(16,"span",7),a(17,"add"),n(),t(18,"span"),a(19,"Book Appointment"),n()()()(),f(20,Ie,1,2,"app-order-status",11),t(21,"app-my-appointments",12),_("cancel",function(x){return o.cancelAppointment(x)}),n()()(),f(22,Ae,1,0,"app-book-appointment-popup",13)),r&2&&(s(),l("title","Stitch")("navItems",o.customerNavItems),s(5),C("Welcome, ",o.currentUser==null?null:o.currentUser.fullName,"!"),s(8),l("ngIf",o.appointments.length>0),s(6),l("ngIf",o.currentAppointment),s(),l("appointments",o.appointments)("loading",o.loading),s(),l("ngIf",o.showBookingPopup))},dependencies:[M,ne,oe,ae,re],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background:linear-gradient(135deg,#2d010cf2,#2c010ef2);color:#f8f5ff;font-family:system-ui,sans-serif}.customer-layout[_ngcontent-%COMP%]{display:flex;min-height:100vh}.dashboard-container[_ngcontent-%COMP%]{flex:1;max-width:1200px;padding:24px;margin:0 auto}.top-bar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:24px}.dashboard-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.dashboard-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;font-weight:700;color:#d4af37;margin:0}.dashboard-subtitle[_ngcontent-%COMP%]{color:#c3b6e6;font-size:14px;margin:0}.header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.book-appointment-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:10px 20px;background:linear-gradient(135deg,#d4af37,#f4e5c3,#d4af37);border:none;border-radius:8px;color:#2d010c;font-weight:600;font-size:14px;cursor:pointer;transition:all .2s}.book-appointment-btn[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{font-size:20px}.book-appointment-btn[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #d4af3766}.notification-btn[_ngcontent-%COMP%]{position:relative;border:none;border-radius:999px;padding:8px 12px;background:#280f0acc;color:#d4af37;display:inline-flex;cursor:pointer;transition:background .2s}.notification-btn[_ngcontent-%COMP%]:hover{background:#280f0a}.badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-2px;min-width:18px;height:18px;padding:0 4px;border-radius:999px;background:#d4af37;color:#2d010c;font-size:10px;font-weight:700;display:flex;align-items:center;justify-content:center}@media (max-width: 900px){.customer-layout[_ngcontent-%COMP%]{flex-direction:column}}"]})}}return i})();var De=[{path:"dashboard",component:se},{path:"",redirectTo:"dashboard",pathMatch:"full"}],ot=(()=>{class i{static{this.\u0275fac=function(r){return new(r||i)}}static{this.\u0275mod=R({type:i})}static{this.\u0275inj=F({imports:[W,te,ie,q.forChild(De)]})}}return i})();export{ot as CustomerModule};
