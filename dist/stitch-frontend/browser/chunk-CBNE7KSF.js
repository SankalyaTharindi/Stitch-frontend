import{a as A,b as f,c as V,d as j,f as R,g as D,h as U,l as Y,n as G}from"./chunk-QGL2CCPC.js";import{a as z}from"./chunk-3GLYZPMD.js";import{C as a,D as h,I as c,J as m,K as _,M as o,N as r,O as v,P as M,Q as C,R as g,T as l,U as F,V as S,ja as k,la as T,o as E,r as O,s as I,sa as N,ua as L,v as x,w as b,wa as q}from"./chunk-OHJWSX5H.js";function W(e,d){e&1&&(o(0,"span"),l(1,"Email is required"),r())}function $(e,d){e&1&&(o(0,"span"),l(1,"Please enter a valid email address"),r())}function H(e,d){if(e&1&&(o(0,"div",17),c(1,W,2,0,"span",18)(2,$,2,0,"span",18),r()),e&2){let t,n,i=g(2);a(),m("ngIf",(t=i.loginForm.get("email"))==null||t.errors==null?null:t.errors.required),a(),m("ngIf",(n=i.loginForm.get("email"))==null||n.errors==null?null:n.errors.email)}}function K(e,d){e&1&&(o(0,"span"),l(1,"Password is required"),r())}function Q(e,d){if(e&1&&(o(0,"div",17),c(1,K,2,0,"span",18),r()),e&2){let t,n=g(2);a(),m("ngIf",(t=n.loginForm.get("password"))==null||t.errors==null?null:t.errors.required)}}function X(e,d){if(e&1&&(o(0,"div",17),l(1),r()),e&2){let t=g(2);a(),F(t.error)}}function Z(e,d){if(e&1){let t=M();o(0,"form",9),C("ngSubmit",function(){x(t);let i=g();return b(i.onSubmit())})("click",function(i){return x(t),b(i.stopPropagation())}),o(1,"div",10)(2,"label",11),l(3,"Email Address"),r(),v(4,"input",12),c(5,H,3,2,"div",13),r(),o(6,"div",10)(7,"label",14),l(8,"Password"),r(),v(9,"input",15),c(10,Q,2,1,"div",13),r(),c(11,X,2,1,"div",13),o(12,"button",16),l(13),r()()}if(e&2){let t,n,i,u,p=g();m("formGroup",p.loginForm),a(4),_("invalid",((t=p.loginForm.get("email"))==null?null:t.invalid)&&((t=p.loginForm.get("email"))==null?null:t.touched)),a(),m("ngIf",((n=p.loginForm.get("email"))==null?null:n.invalid)&&((n=p.loginForm.get("email"))==null?null:n.touched)),a(4),_("invalid",((i=p.loginForm.get("password"))==null?null:i.invalid)&&((i=p.loginForm.get("password"))==null?null:i.touched)),a(),m("ngIf",((u=p.loginForm.get("password"))==null?null:u.invalid)&&((u=p.loginForm.get("password"))==null?null:u.touched)),a(),m("ngIf",p.error),a(),m("disabled",p.loading||p.loginForm.invalid),a(),S(" ",p.loading?"Signing In...":"Sign In"," ")}}function ee(e,d){e&1&&(o(0,"span"),l(1,"Full name is required"),r())}function te(e,d){e&1&&(o(0,"span"),l(1,"Name must be at least 2 characters"),r())}function ne(e,d){if(e&1&&(o(0,"div",17),c(1,ee,2,0,"span",18)(2,te,2,0,"span",18),r()),e&2){let t,n,i=g(2);a(),m("ngIf",(t=i.registerForm.get("fullName"))==null||t.errors==null?null:t.errors.required),a(),m("ngIf",(n=i.registerForm.get("fullName"))==null||n.errors==null?null:n.errors.minlength)}}function ie(e,d){e&1&&(o(0,"span"),l(1,"Email is required"),r())}function re(e,d){e&1&&(o(0,"span"),l(1,"Please enter a valid email address"),r())}function oe(e,d){if(e&1&&(o(0,"div",17),c(1,ie,2,0,"span",18)(2,re,2,0,"span",18),r()),e&2){let t,n,i=g(2);a(),m("ngIf",(t=i.registerForm.get("email"))==null||t.errors==null?null:t.errors.required),a(),m("ngIf",(n=i.registerForm.get("email"))==null||n.errors==null?null:n.errors.email)}}function ae(e,d){e&1&&(o(0,"span"),l(1,"Phone number is required"),r())}function le(e,d){e&1&&(o(0,"span"),l(1,"Please enter a valid phone number"),r())}function me(e,d){if(e&1&&(o(0,"div",17),c(1,ae,2,0,"span",18)(2,le,2,0,"span",18),r()),e&2){let t,n,i=g(2);a(),m("ngIf",(t=i.registerForm.get("phoneNumber"))==null||t.errors==null?null:t.errors.required),a(),m("ngIf",(n=i.registerForm.get("phoneNumber"))==null||n.errors==null?null:n.errors.pattern)}}function se(e,d){e&1&&(o(0,"span"),l(1,"Password is required"),r())}function de(e,d){e&1&&(o(0,"span"),l(1,"Password must be at least 6 characters"),r())}function pe(e,d){if(e&1&&(o(0,"div",17),c(1,se,2,0,"span",18)(2,de,2,0,"span",18),r()),e&2){let t,n,i=g(2);a(),m("ngIf",(t=i.registerForm.get("password"))==null||t.errors==null?null:t.errors.required),a(),m("ngIf",(n=i.registerForm.get("password"))==null||n.errors==null?null:n.errors.minlength)}}function ce(e,d){if(e&1&&(o(0,"div",17),l(1),r()),e&2){let t=g(2);a(),F(t.error)}}function ue(e,d){if(e&1){let t=M();o(0,"form",9),C("ngSubmit",function(){x(t);let i=g();return b(i.onRegister())})("click",function(i){return x(t),b(i.stopPropagation())}),o(1,"div",10)(2,"label",19),l(3,"Full Name"),r(),v(4,"input",20),c(5,ne,3,2,"div",13),r(),o(6,"div",10)(7,"label",21),l(8,"Email Address"),r(),v(9,"input",22),c(10,oe,3,2,"div",13),r(),o(11,"div",10)(12,"label",23),l(13,"Phone Number"),r(),v(14,"input",24),c(15,me,3,2,"div",13),r(),o(16,"div",10)(17,"label",25),l(18,"Password"),r(),v(19,"input",26),c(20,pe,3,2,"div",13),r(),c(21,ce,2,1,"div",13),o(22,"button",16),l(23),r()()}if(e&2){let t,n,i,u,p,P,w,y,s=g();m("formGroup",s.registerForm),a(4),_("invalid",((t=s.registerForm.get("fullName"))==null?null:t.invalid)&&((t=s.registerForm.get("fullName"))==null?null:t.touched)),a(),m("ngIf",((n=s.registerForm.get("fullName"))==null?null:n.invalid)&&((n=s.registerForm.get("fullName"))==null?null:n.touched)),a(4),_("invalid",((i=s.registerForm.get("email"))==null?null:i.invalid)&&((i=s.registerForm.get("email"))==null?null:i.touched)),a(),m("ngIf",((u=s.registerForm.get("email"))==null?null:u.invalid)&&((u=s.registerForm.get("email"))==null?null:u.touched)),a(4),_("invalid",((p=s.registerForm.get("phoneNumber"))==null?null:p.invalid)&&((p=s.registerForm.get("phoneNumber"))==null?null:p.touched)),a(),m("ngIf",((P=s.registerForm.get("phoneNumber"))==null?null:P.invalid)&&((P=s.registerForm.get("phoneNumber"))==null?null:P.touched)),a(4),_("invalid",((w=s.registerForm.get("password"))==null?null:w.invalid)&&((w=s.registerForm.get("password"))==null?null:w.touched)),a(),m("ngIf",((y=s.registerForm.get("password"))==null?null:y.invalid)&&((y=s.registerForm.get("password"))==null?null:y.touched)),a(),m("ngIf",s.error),a(),m("disabled",s.loading||s.registerForm.invalid),a(),S(" ",s.loading?"Creating Account...":"Create Account"," ")}}var B=(()=>{class e{constructor(t,n,i,u){this.formBuilder=t,this.authService=n,this.router=i,this.route=u,this.loading=!1,this.error="",this.returnUrl="",this.activeTab="signin",this.loginForm=this.formBuilder.group({email:["",[f.required,f.email]],password:["",f.required]}),this.registerForm=this.formBuilder.group({fullName:["",[f.required,f.minLength(2)]],email:["",[f.required,f.email]],phoneNumber:["",[f.required,f.pattern(/^[0-9]{10,15}$/)]],password:["",[f.required,f.minLength(6)]]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}setActiveTab(t){this.activeTab=t,this.error=""}onSubmit(){if(this.loginForm.invalid){Object.keys(this.loginForm.controls).forEach(i=>{this.loginForm.get(i)?.markAsTouched()});return}this.loading=!0,this.error="";let{email:t,password:n}=this.loginForm.value;this.authService.login(t,n).subscribe({next:i=>{console.log("Login response:",i),console.log("User role:",i.user.role),this.loading=!1;let u=i.user.role==="ADMIN"?"/admin/dashboard":"/customer/dashboard";console.log("Navigating to:",u),this.router.navigate([u])},error:i=>{console.error("Login error:",i),this.error="Invalid email or password",this.loading=!1}})}onRegister(){if(this.registerForm.invalid){Object.keys(this.registerForm.controls).forEach(n=>{this.registerForm.get(n)?.markAsTouched()});return}this.loading=!0,this.error="";let t=this.registerForm.value;this.authService.register(t).subscribe({next:n=>{console.log("Registration successful:",n),this.loading=!1;let i=n.user.role==="ADMIN"?"/admin/dashboard":"/customer/dashboard";this.router.navigate([i])},error:n=>{console.error("Registration error:",n),this.error=n.error?.message||"Registration failed. Please try again.",this.loading=!1}})}static{this.\u0275fac=function(n){return new(n||e)(h(Y),h(z),h(L),h(N))}}static{this.\u0275cmp=O({type:e,selectors:[["app-login"]],decls:22,vars:6,consts:[[1,"auth-container"],[1,"auth-wrapper"],[1,"brand-section"],[1,"brand-title"],[1,"brand-subtitle"],[1,"auth-boxes"],[1,"auth-box",3,"click"],[1,"box-header"],[3,"formGroup","ngSubmit","click",4,"ngIf"],[3,"ngSubmit","click","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","your@email.com"],["class","error",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password"],["type","submit",1,"btn-primary",3,"disabled"],[1,"error"],[4,"ngIf"],["for","fullName"],["type","text","id","fullName","formControlName","fullName","placeholder","Your full name"],["for","signupEmail"],["type","email","id","signupEmail","formControlName","email","placeholder","your@email.com"],["for","phoneNumber"],["type","tel","id","phoneNumber","formControlName","phoneNumber","placeholder","Your phone number"],["for","signupPassword"],["type","password","id","signupPassword","formControlName","password","placeholder","Create a password"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),l(4,"Stitch"),r(),o(5,"p",4),l(6,"Elegance in Every Thread"),r()(),o(7,"div",5)(8,"div",6),C("click",function(){return i.setActiveTab("signin")}),o(9,"div",7)(10,"h2"),l(11,"Sign In"),r(),o(12,"p"),l(13,"Welcome back to luxury"),r()(),c(14,Z,14,10,"form",8),r(),o(15,"div",6),C("click",function(){return i.setActiveTab("signup")}),o(16,"div",7)(17,"h2"),l(18,"Sign Up"),r(),o(19,"p"),l(20,"Join our exclusive experience"),r()(),c(21,ue,24,16,"form",8),r()()()()),n&2&&(a(8),_("active",i.activeTab==="signin"),a(6),m("ngIf",i.activeTab==="signin"),a(),_("active",i.activeTab==="signup"),a(6),m("ngIf",i.activeTab==="signup"))},dependencies:[k,R,A,V,j,D,U],styles:['.auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#140028f2,#28003cf2),url(https://images.unsplash.com/photo-1615799998603-7c6270a45196?w=1920) center/cover;padding:2rem;position:relative}.auth-container[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:radial-gradient(circle at 20% 50%,rgba(212,175,55,.08),transparent 50%);pointer-events:none}.auth-wrapper[_ngcontent-%COMP%]{max-width:1000px;width:100%;position:relative;z-index:1}.brand-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:3rem}.brand-section[_ngcontent-%COMP%]   .brand-title[_ngcontent-%COMP%]{font-size:4rem;font-weight:700;background:linear-gradient(135deg,#d4af37,#f4e5c3,#d4af37);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0;text-shadow:0 4px 20px rgba(212,175,55,.3);letter-spacing:.1em;font-family:Playfair Display,serif}.brand-section[_ngcontent-%COMP%]   .brand-subtitle[_ngcontent-%COMP%]{color:#f4e5c3;font-size:1.2rem;margin-top:.5rem;letter-spacing:.2em;text-transform:uppercase;font-weight:300}.auth-boxes[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:2rem}@media (max-width: 768px){.auth-boxes[_ngcontent-%COMP%]{grid-template-columns:1fr}}.auth-box[_ngcontent-%COMP%]{background:linear-gradient(145deg,#1e0032f2,#320046f2);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:2px solid transparent;border-radius:20px;padding:2.5rem;transition:all .4s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;box-shadow:0 8px 32px #0000004d}.auth-box[_ngcontent-%COMP%]:before{content:"";position:absolute;inset:0;background:linear-gradient(135deg,rgba(212,175,55,.1),transparent);opacity:0;transition:opacity .4s;pointer-events:none;z-index:0}.auth-box[_ngcontent-%COMP%]:not(.active){cursor:pointer}.auth-box[_ngcontent-%COMP%]:not(.active):hover{transform:translateY(-5px);border-color:#d4af374d;box-shadow:0 12px 48px #d4af3733}.auth-box[_ngcontent-%COMP%]:not(.active):hover:before{opacity:1}.auth-box.active[_ngcontent-%COMP%]{border-color:#d4af37;background:linear-gradient(145deg,#28003cfa,#3c0050fa);box-shadow:0 12px 48px #d4af374d;cursor:default;pointer-events:auto}.auth-box.active[_ngcontent-%COMP%]:before{opacity:1}.auth-box.active[_ngcontent-%COMP%]   .box-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#d4af37}.box-header[_ngcontent-%COMP%]{margin-bottom:2rem;text-align:center;position:relative;z-index:1}.box-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#f4e5c3;font-size:2rem;margin:0 0 .5rem;font-weight:600;letter-spacing:.05em;transition:color .3s ease}.box-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f4e5c3b3;font-size:.95rem;margin:0;letter-spacing:.05em}form[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .4s ease;pointer-events:auto;position:relative;z-index:2}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem;position:relative;z-index:2}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:#d4af37;font-size:.9rem;font-weight:500;margin-bottom:.5rem;letter-spacing:.05em;text-transform:uppercase}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;background:#ffffff0d;border:1.5px solid rgba(212,175,55,.3);border-radius:10px;color:#f4e5c3;font-size:1rem;transition:all .3s ease;box-sizing:border-box;position:relative;z-index:3;pointer-events:auto}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:#f4e5c366}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#d4af37;background:#ffffff14;box-shadow:0 0 0 3px #d4af371a}.form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#ff6b6b}.form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]:focus{border-color:#ff6b6b;box-shadow:0 0 0 3px #ff6b6b1a}.error[_ngcontent-%COMP%]{color:#ff6b6b;font-size:.85rem;margin-top:.5rem;display:block;animation:_ngcontent-%COMP%_shake .3s ease}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.btn-primary[_ngcontent-%COMP%]{width:100%;padding:1rem;background:linear-gradient(135deg,#d4af37,#f4e5c3,#d4af37);background-size:200% 100%;border:none;border-radius:10px;color:#2a0040;font-size:1rem;font-weight:600;letter-spacing:.05em;text-transform:uppercase;cursor:pointer;transition:all .3s ease;margin-top:1rem;box-shadow:0 4px 15px #d4af374d}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background-position:100% 0;transform:translateY(-2px);box-shadow:0 6px 25px #d4af3766}.btn-primary[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-primary[_ngcontent-%COMP%]:disabled{background:#d4af374d;color:#2a004080;cursor:not-allowed;box-shadow:none}']})}}return e})();var ge=[{path:"login",component:B},{path:"",redirectTo:"login",pathMatch:"full"}],Me=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=I({type:e})}static{this.\u0275inj=E({imports:[T,G,q.forChild(ge)]})}}return e})();export{Me as AuthModule};
