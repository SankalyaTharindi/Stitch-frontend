import{a as I}from"./chunk-Q6EFP2CI.js";import{a as E,b as u,c as N,d as O,f as L,g as j,h as k,l as T,n as A}from"./chunk-NX65GF22.js";import{C as l,D as s,I as p,J as d,M as n,N as i,O as g,Q as _,R as C,T as m,U as w,V as M,ja as x,la as y,o as h,r as v,s as b,sa as S,ua as F,va as P}from"./chunk-ZXFXI32P.js";function G(e,f){e&1&&(n(0,"div",10),m(1," Please enter a valid email "),i())}function R(e,f){e&1&&(n(0,"div",10),m(1," Password is required "),i())}function U(e,f){if(e&1&&(n(0,"div",10),m(1),i()),e&2){let a=C();l(),w(a.error)}}var D=(()=>{class e{constructor(a,o,t,r){this.formBuilder=a,this.authService=o,this.router=t,this.route=r,this.loading=!1,this.error="",this.returnUrl="",this.loginForm=this.formBuilder.group({email:["",[u.required,u.email]],password:["",u.required]}),this.returnUrl=this.route.snapshot.queryParams.returnUrl||"/"}onSubmit(){if(this.loginForm.invalid)return;this.loading=!0,this.error="";let{email:a,password:o}=this.loginForm.value;this.authService.login(a,o).subscribe({next:t=>{let r=t.user.role==="ADMIN"?"/admin/dashboard":"/customer/dashboard";this.router.navigate([r])},error:t=>{this.error="Invalid email or password",this.loading=!1}})}static{this.\u0275fac=function(o){return new(o||e)(s(T),s(I),s(F),s(S))}}static{this.\u0275cmp=v({type:e,selectors:[["app-login"]],decls:18,vars:6,consts:[[1,"login-container"],[1,"login-card"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["type","email","id","email","formControlName","email","placeholder","Enter your email"],["class","error",4,"ngIf"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password"],["type","submit",3,"disabled"],[1,"error"]],template:function(o,t){if(o&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),m(3,"Login"),i(),n(4,"form",2),_("ngSubmit",function(){return t.onSubmit()}),n(5,"div",3)(6,"label",4),m(7,"Email"),i(),g(8,"input",5),p(9,G,2,0,"div",6),i(),n(10,"div",3)(11,"label",7),m(12,"Password"),i(),g(13,"input",8),p(14,R,2,0,"div",6),i(),p(15,U,2,1,"div",6),n(16,"button",9),m(17),i()()()()),o&2){let r,c;l(4),d("formGroup",t.loginForm),l(5),d("ngIf",((r=t.loginForm.get("email"))==null?null:r.invalid)&&((r=t.loginForm.get("email"))==null?null:r.touched)),l(5),d("ngIf",((c=t.loginForm.get("password"))==null?null:c.invalid)&&((c=t.loginForm.get("password"))==null?null:c.touched)),l(),d("ngIf",t.error),l(),d("disabled",t.loading||t.loginForm.invalid),l(),M(" ",t.loading?"Logging in...":"Login"," ")}},dependencies:[x,L,E,N,O,j,k],styles:[".login-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f5f5}.login-card[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 2px 10px #0000001a;width:100%;max-width:400px}h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#555;font-weight:500}input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ddd;border-radius:4px;font-size:1rem}input[_ngcontent-%COMP%]:focus{outline:none;border-color:#4caf50}.error[_ngcontent-%COMP%]{color:#f44336;font-size:.875rem;margin-top:.25rem}button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#4caf50;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer;margin-top:1rem}button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#45a049}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}"]})}}return e})();var z=[{path:"login",component:D},{path:"",redirectTo:"login",pathMatch:"full"}],$=(()=>{class e{static{this.\u0275fac=function(o){return new(o||e)}}static{this.\u0275mod=b({type:e})}static{this.\u0275inj=h({imports:[y,A,P.forChild(z)]})}}return e})();export{$ as AuthModule};
