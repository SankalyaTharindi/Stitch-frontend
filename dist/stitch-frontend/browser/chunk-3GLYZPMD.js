import{e as n,k as i,ma as u,n as c,q as s,ua as a}from"./chunk-OHJWSX5H.js";var S=(()=>{class o{constructor(t,e){this.http=t,this.router=e,this.API_URL="http://localhost:8080/api/auth";let r=localStorage.getItem("currentUser");this.currentUserSubject=new n(r?JSON.parse(r):null),this.currentUser=this.currentUserSubject.asObservable()}get currentUserValue(){return this.currentUserSubject.value}login(t,e){return console.log("AuthService.login called with:",t),this.http.post(`${this.API_URL}/login`,{email:t,password:e}).pipe(i(r=>{console.log("Login response received:",r),localStorage.setItem("token",r.token),localStorage.setItem("currentUser",JSON.stringify(r.user)),this.currentUserSubject.next(r.user)}))}register(t){return this.http.post(`${this.API_URL}/register`,t).pipe(i(e=>{localStorage.setItem("token",e.token),localStorage.setItem("currentUser",JSON.stringify(e.user)),this.currentUserSubject.next(e.user)}))}logout(){localStorage.removeItem("token"),localStorage.removeItem("currentUser"),this.currentUserSubject.next(null),this.router.navigate(["/auth/login"])}getToken(){return localStorage.getItem("token")}isLoggedIn(){return!!this.getToken()}hasRole(t){return this.currentUserValue?.role===t}static{this.\u0275fac=function(e){return new(e||o)(s(u),s(a))}}static{this.\u0275prov=c({token:o,factory:o.\u0275fac,providedIn:"root"})}}return o})();export{S as a};
